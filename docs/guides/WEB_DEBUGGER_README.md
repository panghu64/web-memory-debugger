# Web内存调试器使用说明

## 功能概述

这是一个基于Web的Android内存调试工具，提供以下功能：

1. **进程管理** - 查看所有运行的进程
2. **内存浏览器** - 查看进程内存映射
3. **Hex编辑器** - 读取和编辑内存
4. **反汇编视图** - 反汇编ARM64/ARMv7代码
5. **硬件断点** - 监控内存访问并捕获寄存器状态
6. **基址分析** - 自动分析基址和偏移链

## 使用步骤

### 1. 启动应用
在Android设备上启动应用，点击"启动Web服务器"按钮。

### 2. 访问Web界面
在浏览器中访问：`http://localhost:8080`

如果使用远程设备，需要端口转发：
```bash
adb forward tcp:8080 tcp:8080
```

### 3. 选择目标进程
1. 在左侧导航点击"进程管理"
2. 搜索目标进程（如：com.ea.game.pvzfree_cn）
3. 点击"选择"按钮

### 4. 查看内存映射
1. 点击"内存浏览器"
2. 查看进程的所有内存区域
3. 可筛选"可执行"或"可写"区域

### 5. 反汇编代码
1. 点击"反汇编视图"
2. 输入代码地址（十六进制）
3. 输入要反汇编的指令数量
4. 点击"反汇编"

### 6. 设置硬件断点
1. 点击"硬件断点"
2. 输入要监控的内存地址
3. 点击"设置断点"
4. 触发游戏中的相关操作
5. 查看捕获的寄存器状态

### 7. 分析基址
1. 在硬件断点触发后
2. 点击"分析基址"按钮
3. 查看分析结果和候选基址

## API文档

### GET /api/process/list
获取所有进程列表

### GET /api/process/info?pid=X
获取指定进程详情

### GET /api/memory/maps?pid=X&type=executable
获取内存映射（可选筛选）

### POST /api/memory/read
```json
{
  "pid": 12345,
  "address": "6DB2031D58",
  "length": 256
}
```

### POST /api/disasm
```json
{
  "pid": 12345,
  "address": "7123456780",
  "count": 20
}
```

### POST /api/debug/watchpoint
```json
{
  "pid": 12345,
  "address": "6DB2031D58",
  "timeout": 30
}
```

## 注意事项

1. **需要Root权限** - 所有内存操作都需要Root权限
2. **Capstone库** - 反汇编功能需要libcapstone.so
3. **内核限制** - 硬件断点功能取决于内核支持
4. **安全风险** - 此工具仅用于学习和研究

## 故障排除

### 服务器启动失败
- 检查端口8080是否被占用
- 查看logcat错误日志

### 无法读取内存
- 确保已获取Root权限
- 检查目标进程是否存在
- 验证地址是否有效

### 反汇编失败
- 确保libcapstone.so已正确放置
- 检查CMake编译输出
- 查看memtool日志

### 硬件断点不触发
- 某些Android内核不支持硬件断点
- 尝试使用软件方法代替
- 增加超时时间

